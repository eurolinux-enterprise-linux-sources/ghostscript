From fc3f0de2d6cd6f74ae94fc340e4d5fe8ac165314 Mon Sep 17 00:00:00 2001
From: Chris Liddell <chris.liddell@artifex.com>
Date: Wed, 5 Oct 2016 09:59:25 +0100
Subject: [PATCH] Bug 697179: Reference count device icc profile

when copying a device
---
 base/gsdevice.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/base/gsdevice.c b/base/gsdevice.c
index 37fcc7e..b52581c 100644
--- a/base/gsdevice.c
+++ b/base/gsdevice.c
@@ -536,6 +536,7 @@ gx_device_init(gx_device * dev, const gx_device * proto, gs_memory_t * mem,
     dev->memory = mem;
     dev->retained = !internal;
     rc_init(dev, mem, (internal ? 0 : 1));
+    rc_increment(dev->icc_struct);
 }
 
 void
-- 
2.7.4

